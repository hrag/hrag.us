define([],function(){"use strict";function t(t){this.routes=null!=t?t:{},this.setup_routes(),this.setup_events()}return t.prototype.init=function(){return this.handle_route(this.current_path())},t.prototype.setup_routes=function(){},t.prototype.setup_events=function(){return window.addEventListener("hashchange",function(t){return function(e){return t.handle_route(t.current_path())}}(this))},t.prototype.current_path=function(){return"/"+window.location.hash.replace("#","")},t.prototype.path_pieces=function(){return this.current_path.split("/")},t.prototype.handle_route=function(t){var e,r,n,o,i,u,s,h,p,a,f,c;e=!1,h={},f=this.routes;for(n in f)if(s=f[n],!e&&s.path.indexOf(":")<0&&s.path===t){e=s;break}if(!e){c=this.routes;for(n in c)if(s=c[n],!e&&s.path.indexOf(":")>0&&(u=s.path.split(":"),o=t.split("/"),0===t.indexOf(u[0]))){for(e=s,r=p=0,a=u.length;a>p;r=++p)i=u[r],r>0&&(h[i]=o[r]);break}if(!e){if(console.error("routing error for '"+t+"'; no handler found"),!this.routes.hasOwnProperty("*"))return;e=this.routes["*"]}}return e.controller._handle(e.name,h)},t.prototype.get_route=function(t,e){var r,n,o;if(null==e&&(e={}),!this.routes.hasOwnProperty(t))return console.error("no route found with name: "+t);n=this.routes[t].path;for(r in e)o=e[r],n.replace(new RegExp(":"+r,"g"),o);return n},t});