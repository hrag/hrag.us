define(["jquery","json!projects.json","mustache","helpers/before","jquerymob","preload"],function(e,t,n,o){return function(){var r,i=e(".project__wrapper"),c=e(".project"),a=(e(".footer"),e(".project .footer")),s=window.location.hash;s=s.split("/",2),s=s[1].replace("#","");new o("project");i.html("");var f=function(e,t){return t>=e&&(t=0),t==e-1&&(t=0),t};e.get("/templates/project.html",function(o){var a;t.length;e.each(t,function(e){if(t[e].id==s){r=e;var n=f(t.length,e+1);a=t[n].id;var o=t[n].name;t[r].nextId=a,t[r].nextName=o}});var l=n.render(o,t[r]);c.removeClass("project--right").addClass("project--in-view"),i.append(l);var p=e(".project__screenshot__link"),d=e(".screenshot");p.each(function(){var t=e(this).attr("href");e(this).click(function(n){n.preventDefault(),d.find("img").attr("src",t).removeClass("mobile_screenshot"),console.log(t),t.indexOf("mob")>0&&d.find("img").attr("src",t).addClass("mobile_screenshot"),d.find("img").attr("src",t),d.fadeIn(300),e(document).keyup(function(t){27===t.keyCode&&d.fadeOut(300,function(){e(this).find("img").attr("src","")})}),d.click(function(){e(this).fadeOut(300,function(){e(this).find("img").attr("src","")})})})}),e(".project__footer__next-button").tap(function(){window.location.hash="project/"+a,e(".project").animate({scrollTop:0},"300","swing")})}).done(function(){}),a.length<1&&e.get("/templates/footer.html",function(e){var t=n.render(e,{});c.append(t)})}});