define(["jquery","json!projects.json","mustache","helpers/before","jquerymob","preload"],function(t,e,n,r){return function(){var o,c=t(".project__wrapper"),i=t(".project"),a=(t(".footer"),t(".project .footer")),f=window.location.hash;f=f.split("/",2),f=f[1].replace("#","");new r("project");c.html("");var p=function(t,e){return e>=t&&(e=0),e==t-1&&(e=0),e};t.get("/templates/project.html",function(r){var a;e.length;t.each(e,function(t){if(e[t].id==f){o=t;var n=p(e.length,t+1);a=e[n].id;var r=e[n].name;e[o].nextId=a,e[o].nextName=r}});var s=n.render(r,e[o]);i.removeClass("project--right").addClass("project--in-view"),c.append(s);var u=t(".project__screenshot__link"),h=t(".screenshot");u.each(function(){var e=t(this).attr("href");t(this).click(function(n){n.preventDefault(),h.find("img").attr("src",e),h.fadeIn(300),t(document).keyup(function(e){27===e.keyCode&&h.fadeOut(300,function(){t(this).find("img").attr("src","")})}),h.click(function(){t(this).fadeOut(300,function(){t(this).find("img").attr("src","")})})})}),t(".project__footer__next-button").tap(function(){window.location.hash="project/"+a})}).done(function(){}),a.length<1&&t.get("/templates/footer.html",function(t){var e=n.render(t,{});i.append(e)})}});