define(["jquery","json!projects.json","mustache","helpers/before","preload","jquerymob"],function(n,t,a,e){return function(){function t(t){if(0==t)return c.addClass("displaynone"),l.removeClass("noverflow"),f.removeClass("displaynone"),void g.removeClass("displaynone");o(t),f.addClass("displaynone"),g.addClass("displaynone");n.get(p+"lg"+t+".jpg",function(){c.hasClass("displaynone")&&(c.removeClass("displaynone"),l.addClass("noverflow")),d.attr("src",p+"/lg"+t+".jpg")}).done(function(){t=parseInt(t);var a=t-1;a=b(a);var e=t+1;e=b(e),1==t?a=b(v-1):t==v-1&&(e=b(1));var o=(p+"lg"+a+".jpg").toString(),r=(p+"lg"+e+".jpg").toString(),i=(p+"sm"+a+".jpg").toString(),l=(p+"sm"+e+".jpg").toString(),s=[o,r,i,l];n(s).preload(function(){n(".gallery__nav--left").css({"background-image":"url("+i+")"}),n(".gallery__nav--right").css({"background-image":"url("+l+")"})})})}function o(a){var e,o,r=n(".gallery__nav--left"),i=n(".gallery__nav--right"),l=n(".gallery__nav--close");r.unbind("tap"),i.unbind("tap"),d.unbind("tap"),a=parseInt(a),1==a?(e=b(v-1),o=b(a+1)):a==v-1?(e=b(a-1),o=b(1)):(e=b(a-1),o=b(a+1)),n(document).keyup(function(n){n.keyCode==_&&t(0)}),l.on("click",function(n){t(0)}),r.on("tap",function(n){t(e),n.preventDefault()}),i.on("tap",function(n){t(o),n.preventDefault()}),d.on("tap",function(n){t(o),n.preventDefault()})}function r(t){n(".about__content__section").addClass("displaynone"),n(".about__content__"+t).removeClass("displaynone"),n(".about__nav button").removeClass("selected"),n(".about__nav button[data-about="+t+"]").addClass("selected"),n(window).width()>799?l.scrollTop(n(window).height()-80):"gallery"!=t&&(console.log(t),l.scrollTop(n(window).height()))}var l=n(".about"),s=n(".about__wrapper"),u=(n(".footer"),n(".about .footer")),c=n(".gallery__pic"),d=n(".gallery__pic__current"),p="/img/gallery/",g=n(".nav-closeback"),f=n(".nav-menu"),v=48,_=27,m=(new e("about"),function(){var n=[];for(i=1;i<=v;i++)i<10?i="0"+i.toString():i=i.toString(),n.push(i);return n}),b=function(n){return numStr=n.toString(),"0"==numStr.charAt(0)?numStr:numStr>0&&numStr<10?"0"+numStr:numStr};n.get("/templates/about.html",function(e){var o=a.render(e,m());if(s.append(o),n(window).width()<800)var i=["/img/about-750x1335.jpg"];else var i=["/img/about-1800x1220.jpg"];n(i).preload(function(){l.removeClass("about--right").addClass("about--in-view")}),n(".gallery__thumb").each(function(){var a;n(this).on("click",function(){a=n(this).data("pic"),t(a)})}),n(".about__nav button").each(function(){n(this).tap(function(){r(n(this).data("about"))})})}).done(function(){}),u.length<1&&n.get("/templates/footer.html",function(t){var e=a.render(t,{});l.append(e),n(".footer").addClass("footerStretch")})}});