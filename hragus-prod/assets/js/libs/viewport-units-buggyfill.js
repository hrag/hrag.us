/*!
 * viewport-units-buggyfill v0.5.0
 * @web: https://github.com/rodneyrehm/viewport-units-buggyfill/
 * @author: Rodney Rehm - http://rodneyrehm.de/en/
 */

(function(e,t){typeof define=="function"&&define.amd?define([],t):typeof exports=="object"?module.exports=t():e.viewportUnitsBuggyfill=t()})(this,function(){function h(e,t){var n;return function(){var r=this,i=arguments,s=function(){e.apply(r,i)};clearTimeout(n),n=setTimeout(s,t)}}function p(){try{return window.self!==window.top}catch(e){return!0}}function d(n){if(e)return;n===!0&&(n={force:!0}),t=n||{},t.isMobileSafari=l,t.isBadStockAndroid=c;if(!t.force&&!l&&!a&&!c&&!f&&(!t.hacks||!t.hacks.required(t)))return;t.hacks&&t.hacks.initialize(t),e=!0,u=document.createElement("style"),u.id="patched-viewport",document.head.appendChild(u),x(function(){var e=h(m,t.refreshDebounceWait||100);window.addEventListener("orientationchange",e,!0),window.addEventListener("pageshow",e,!0);if(t.force||a||p())window.addEventListener("resize",e,!0),t._listeningToResize=!0;t.hacks&&t.hacks.initializeEvents(t,m,e),m()})}function v(){u.textContent=b(),u.parentNode.appendChild(u)}function m(){if(!e)return;g(),setTimeout(function(){v()},1)}function g(){return o=[],i.call(document.styleSheets,function(e){if(e.ownerNode.id==="patched-viewport"||!e.cssRules||e.ownerNode.getAttribute("data-viewport-units-buggyfill")==="ignore")return;if(e.media&&e.media.mediaText&&window.matchMedia&&!window.matchMedia(e.media.mediaText).matches)return;i.call(e.cssRules,y)}),o}function y(e){if(e.type===7){var n;try{n=e.cssText}catch(s){return}r.lastIndex=0,r.test(n)&&(o.push([e,null,n]),t.hacks&&t.hacks.findDeclarations(o,e,null,n));return}if(!e.style){if(!e.cssRules)return;i.call(e.cssRules,function(e){y(e)});return}i.call(e.style,function(n){var i=e.style.getPropertyValue(n);r.lastIndex=0,r.test(i)&&(o.push([e,n,i]),t.hacks&&t.hacks.findDeclarations(o,e,n,i))})}function b(){s=S();var e=[],t=[],n,r;return o.forEach(function(i){var s=w.apply(null,i),o=s.selector.length?s.selector.join(" {\n")+" {\n":"",u=(new Array(s.selector.length+1)).join("\n}");if(!o||o!==n){t.length&&(e.push(n+t.join("\n")+r),t.length=0),o?(n=o,r=u,t.push(s.content)):(e.push(s.content),n=null,r=null);return}o&&!n&&(n=o,r=u),t.push(s.content)}),t.length&&e.push(n+t.join("\n")+r),f&&e.push("* { content: normal !important; }"),e.join("\n\n")}function w(e,n,i){var s,o=[];s=i.replace(r,E),t.hacks&&(s=t.hacks.overwriteDeclaration(e,n,s)),n&&(o.push(e.selectorText),s=n+": "+s+";");var u=e.parentRule;while(u)o.unshift("@media "+u.media.mediaText),u=u.parentRule;return{selector:o,content:s}}function E(e,t,n){var r=s[n],i=parseFloat(t)/100;return i*r+"px"}function S(){var e=window.innerHeight,t=window.innerWidth;return{vh:e,vw:t,vmax:Math.max(t,e),vmin:Math.min(t,e)}}function x(e){var t=0,n=function(){t--,t||e()};i.call(document.styleSheets,function(e){if(!e.href||T(e.href)===T(location.href))return;t++,N(e.ownerNode,n)}),t||e()}function T(e){return e.slice(0,e.indexOf("/",e.indexOf("://")+3))}function N(e,t){C(e.href,function(){var n=document.createElement("style");n.media=e.media,n.setAttribute("data-href",e.href),n.textContent=this.responseText,e.parentNode.replaceChild(n,e),t()},t)}function C(e,t,n){var r=new XMLHttpRequest;if("withCredentials"in r)r.open("GET",e,!0);else{if(typeof XDomainRequest=="undefined")throw new Error("cross-domain XHR not supported");r=new XDomainRequest,r.open("GET",e)}return r.onload=t,r.onerror=n,r.send(),r}var e=!1,t,n=window.navigator.userAgent,r=/([+-]?[0-9.]+)(vh|vw|vmin|vmax)/g,i=[].forEach,s,o,u,a=!1,f=n.indexOf("Opera Mini")>-1,l=/(iPhone|iPod|iPad).+AppleWebKit/i.test(n)&&function(){var e=n.match(/OS (\d)/);return e&&e.length>1&&parseInt(e[1])<8}(),c=function(){var e=n.indexOf(" Android ")>-1;if(!e)return!1;var t=n.indexOf("Version/")>-1;if(!t)return!1;var r=parseFloat((n.match("Android ([0-9.]+)")||[])[1]);return r<=4.4}();return a||(a=!!navigator.userAgent.match(/Trident.*rv[ :]*11\./)),{version:"0.5.0",findProperties:g,getCss:b,init:d,refresh:m}});