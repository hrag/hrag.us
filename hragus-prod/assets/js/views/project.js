define(["jquery","json!projects.json","mustache","helpers/before","jquerymob","preload"],function(e,t,n,r){return function(){var i=e(".project__wrapper"),s=e(".project"),o,u=0,a=[],f=e(".footer"),l=e(".project .footer"),c=window.location.hash;c=c.split("/",2),c=c[1].replace("#","");var h=new r("project");i.html("");var p=function(e,t){return t>=e&&(t=0),t==e-1&&(t=0),t};e.get("/templates/project.html",function(r){var u,a=t.length;e.each(t,function(e){if(t[e].id==c){o=e;var n=p(t.length,e+1);u=t[n].id;var r=t[n].name;t[o].nextId=u,t[o].nextName=r,e==a}});var f=n.render(r,t[o]);s.removeClass("project--right").addClass("project--in-view"),i.append(f);var l=e(".project__screenshot__link"),h=e(".screenshot");l.each(function(){var t=e(this).attr("href");e(this).click(function(n){n.preventDefault(),h.find("img").attr("src",t),h.fadeIn(300),e(document).keyup(function(t){t.keyCode===27&&h.fadeOut(300,function(){e(this).find("img").attr("src","")})}),h.click(function(){e(this).fadeOut(300,function(){e(this).find("img").attr("src","")})})})}),e(".project__footer__next-button").tap(function(){window.location.hash="project/"+u})}).done(function(){}),l.length<1&&e.get("/templates/footer.html",function(e){var t=n.render(e,{});s.append(t)})}});