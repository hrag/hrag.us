define(["jquery","json!projects.json","mustache","helpers/before","preload","jquerymob"],function(e,t,n,r){return function(){function y(n){if(n==0){a.addClass("displaynone"),t.removeClass("noverflow"),h.removeClass("displaynone"),c.removeClass("displaynone");return}b(n),h.addClass("displaynone"),c.addClass("displaynone");var r,i;e.get(l+"lg"+n+".jpg",function(){a.hasClass("displaynone")&&(a.removeClass("displaynone"),t.addClass("noverflow")),f.attr("src",l+"/lg"+n+".jpg")}).done(function(){n=parseInt(n);var t=n-1;t=g(t);var r=n+1;r=g(r),n==1?t=g(p-1):n==p-1&&(r=g(1));var i=(l+"lg"+t+".jpg").toString(),s=(l+"lg"+r+".jpg").toString(),o=(l+"sm"+t+".jpg").toString(),u=(l+"sm"+r+".jpg").toString(),a=[i,s,o,u];e(a).preload(function(){e(".gallery__nav--left").css({"background-image":"url("+o+")"}),e(".gallery__nav--right").css({"background-image":"url("+u+")"})})})}function b(t){var n,r,i=e(".gallery__nav--left"),s=e(".gallery__nav--right"),o=e(".gallery__nav--close");i.unbind("tap"),s.unbind("tap"),f.unbind("tap"),t=parseInt(t),t==1?(n=g(p-1),r=g(t+1)):t==p-1?(n=g(t-1),r=g(1)):(n=g(t-1),r=g(t+1)),e(document).keyup(function(e){e.keyCode==d&&y(0)}),o.on("click",function(e){y(0)}),i.on("tap",function(e){y(n),e.preventDefault()}),s.on("tap",function(e){y(r),e.preventDefault()}),f.on("tap",function(e){y(r),e.preventDefault()})}function w(n){e(".about__content__section").addClass("displaynone"),e(".about__content__"+n).removeClass("displaynone"),e(".about__nav button").removeClass("selected"),e(".about__nav button[data-about="+n+"]").addClass("selected"),e(window).width()>799?t.scrollTop(e(window).height()-80):n!="gallery"&&(console.log(n),t.scrollTop(e(window).height()))}var t=e(".about"),s=e(".about__wrapper"),o=e(".footer"),u=e(".about .footer"),a=e(".gallery__pic"),f=e(".gallery__pic__current"),l="/public/img/gallery/",c=e(".nav-closeback"),h=e(".nav-menu"),p=28,d=27,v=new r("about"),m=function(){var e=[];for(i=1;i<p;i++)i<10?i="0"+i.toString():i=i.toString(),e.push(i);return e},g=function(e){return numStr=e.toString(),numStr.charAt(0)=="0"?numStr:numStr>0&&numStr<10?"0"+numStr:numStr};e.get("/templates/about.html",function(r){var i=n.render(r,m());s.append(i);if(e(window).width()<800)var o=["/public/img/about-750x1335.jpg"];else var o=["/public/img/about-1800x1220.jpg"];e(o).preload(function(){t.removeClass("about--right").addClass("about--in-view")}),e(".gallery__thumb").each(function(){var t;e(this).on("click",function(){t=e(this).data("pic"),y(t)})}),e(".about__nav button").each(function(){e(this).tap(function(){w(e(this).data("about"))})})}).done(function(){}),u.length<1&&e.get("/templates/footer.html",function(r){var i=n.render(r,{});t.append(i),e(".footer").addClass("footerStretch")})}});